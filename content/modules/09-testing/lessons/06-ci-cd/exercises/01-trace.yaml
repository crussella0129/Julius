type: trace
id: "06-ci-cd-trace-01"
prompt: "Trace through this code that simulates a CI pipeline and predict what will be printed."
code: |
  def run_step(name, passes):
      print(f"Running {name}...", end=" ")
      if passes:
          print("PASS")
          return True
      else:
          print("FAIL")
          return False

  steps = [
      ("lint", True),
      ("type-check", True),
      ("tests", False),
      ("deploy", True),
  ]

  all_passed = True
  for name, passes in steps:
      if not run_step(name, passes):
          all_passed = False
          print("Pipeline stopped!")
          break

  if all_passed:
      print("Pipeline complete!")
steps:
  - line: 1
    variables: {}
    output: ""
    explanation: "Define run_step function that prints step name and result."
  - line: 10
    variables: {}
    output: ""
    explanation: "Define pipeline steps as (name, will_pass) tuples."
  - line: 17
    variables: { "all_passed": "True" }
    output: ""
    explanation: "Initialize all_passed flag."
  - line: 18
    variables: { "name": "'lint'", "passes": "True" }
    output: "Running lint... PASS"
    explanation: "lint step passes. run_step returns True."
  - line: 18
    variables: { "name": "'type-check'", "passes": "True" }
    output: "Running type-check... PASS"
    explanation: "type-check step passes. run_step returns True."
  - line: 18
    variables: { "name": "'tests'", "passes": "False" }
    output: "Running tests... FAIL"
    explanation: "tests step fails. run_step returns False."
  - line: 20
    variables: { "all_passed": "False" }
    output: "Pipeline stopped!"
    explanation: "Since run_step returned False, set all_passed to False and break."
expected_output: |
  Running lint... PASS
  Running type-check... PASS
  Running tests... FAIL
  Pipeline stopped!
hints:
  - "The pipeline stops at the first failure due to the break statement."
  - "The deploy step never runs because tests failed."
concept_tags:
  - continuous-integration
  - automated-pipeline
